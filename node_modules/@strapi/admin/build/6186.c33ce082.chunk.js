"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[6186],{86409:function(W,y,e){e.d(y,{F:function(){return E}});var t=e(32735),l=e(61489),a=e(67879),g=e(20108);const E=(n={},m={})=>{const{id:r="",...i}=n,{get:o}=(0,l.kY)(),{locale:c}=(0,a.Z)(),u=(0,l.Xe)(c,{sensitivity:"base"}),{data:p,error:v,isError:s,isLoading:h,refetch:C}=(0,g.useQuery)(["roles",r,i],async()=>{const{data:T}=await o(`/admin/roles/${r??""}`,{params:i});return T},m);return{roles:t.useMemo(()=>{let T=[];return r&&p?T=[p.data]:Array.isArray(p?.data)&&(T=p.data),[...T].sort((O,I)=>u.compare(O.name,I.name))},[p,r,u]),error:v,isError:s,isLoading:h,refetch:C}}},61234:function(W,y,e){e.d(y,{v:function(){return a}});var t=e(32735),l=e(15062);function a(g,E){const n=(0,l.oR)();(0,t.useEffect)(()=>{n.injectReducer(g,E)},[n,g,E])}},98866:function(W,y,e){e.d(y,{q:function(){return g}});var t=e(32735),l=e(61489),a=e(20108);function g({enabled:E}={enabled:!0}){const{get:n}=(0,l.kY)(),{data:m,isError:r,isLoading:i}=(0,a.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:u}}=await n("/admin/license-limit-information");return u},{enabled:E}),o=t.useMemo(()=>m??{},[m]),c=t.useCallback(u=>(o?.features??[]).find(v=>v.name===u)?.options??{},[o?.features]);return{license:o,getFeature:c,isError:r,isLoading:i}}},77061:function(W,y,e){e.d(y,{CI:function(){return n},ES:function(){return l},FP:function(){return i},Js:function(){return c},Lk:function(){return p},Mu:function(){return r},PP:function(){return g},Pz:function(){return u},_V:function(){return E},fC:function(){return a},rI:function(){return o},wt:function(){return v},xn:function(){return m}});var t=e(2121);function l(s){return{type:t.bc,payload:{id:s}}}function a({workflow:s}){return{type:t.qZ,payload:s}}function g({workflows:s}){return{type:t.QM,payload:s}}function E(s){return{type:t.x4,payload:{stageId:s}}}function n(s={}){return{type:t.Ot,payload:s}}function m(s,h){return{type:t.Nj,payload:{stageId:s,...h}}}function r(s){return{type:t.k_,payload:s}}function i(s,h){return{type:t.$k,payload:{newIndex:h,oldIndex:s}}}function o(s){return{type:t.VS,payload:s}}function c(){return{type:t.gu}}function u(s){return{type:t.yq,payload:s}}function p(s){return{type:t.zn,payload:s}}function v(s){return{type:t.rg,payload:s}}},27187:function(W,y,e){e.d(y,{eJ:function(){return L},lx:function(){return O},h4:function(){return w},fC:function(){return I}});var t=e(32735),l=e(99226),a=e(95162),g=e(56932),E=e(64092),n=e(61489),m=e(70788),r=e(67879),i=e(61575),o=e(2121),c=e(84642),u=e(8365),p=e(91917),v=e(60216),s=e.n(v),h=e(8471);const C=(0,h.ZP)(c.k)`
  svg path {
    fill: ${({theme:P})=>P.colors.neutral600};
  }
`;function M({name:P}){return t.createElement(c.k,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,n.Q1)(300)},t.createElement(C,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},t.createElement(p.Z,{width:`${8/16}rem`})),t.createElement(u.Z,{fontWeight:"bold"},P))}M.propTypes={name:s().string.isRequired};function T({type:P,item:A}){switch(P){case o.uL.STAGE:return t.createElement(M,{...A});default:return null}}function O(){return t.createElement(i.r,{renderItem:T})}function I({children:P}){return t.createElement(l.A,null,t.createElement(a.o,{tabIndex:-1},t.createElement(g.D,null,P)))}function L({href:P}){const{formatMessage:A}=(0,r.Z)();return t.createElement(n.rU,{startIcon:t.createElement(m.Z,null),to:P},A({id:"global.back",defaultMessage:"Back"}))}function w({title:P,subtitle:A,navigationAction:U,primaryAction:x}){return t.createElement(t.Fragment,null,t.createElement(n.SL,{name:P}),t.createElement(E.T,{navigationAction:U,primaryAction:x,title:P,subtitle:A}))}},90562:function(W,y,e){e.d(y,{uT:function(){return T},fC:function(){return L},Dx:function(){return M}});var t=e(32735),l=e(8365),a=e(84642),g=e(21223),E=e(87674),n=e(77981),m=e(14763),r=e(90431),i=e(98610),o=e(60216),c=e.n(o),u=e(67879),p=e(8471),v=e.p+"0cd5f8915b265d5b1856.png";const s="limits-title",h="https://strapi.io/pricing-cloud",C="https://strapi.io/contact-sales";function M({children:w}){return t.createElement(l.Z,{variant:"alpha",id:s},w)}M.propTypes={children:c().node.isRequired};function T({children:w}){return t.createElement(l.Z,{variant:"omega"},w)}T.propTypes={children:c().node.isRequired};function O(){const{formatMessage:w}=(0,u.Z)();return t.createElement(a.k,{gap:2,paddingTop:4},t.createElement(r.Q,{variant:"default",isExternal:!0,href:h},w({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(r.Q,{variant:"tertiary",isExternal:!0,href:C},w({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const I=p.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:w})=>`-${w.spaces[7]}`};
  margin-top: ${({theme:w})=>`-${w.spaces[7]}`};
  width: 360px;
`;function L({children:w,isOpen:P,onClose:A}){const{formatMessage:U}=(0,u.Z)();return P?t.createElement(g.P,{labelledBy:s},t.createElement(E.f,null,t.createElement(a.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(a.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},w,t.createElement(O,null)),t.createElement(a.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(I,{src:v,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(n.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(m.h,{icon:t.createElement(i.Z,null),"aria-label":U({id:"global.close",defaultMessage:"Close"}),onClick:A})))))):null}L.defaultProps={isOpen:!1},L.propTypes={children:c().node.isRequired,isOpen:c().bool,onClose:c().func.isRequired}},45594:function(W,y,e){e.d(y,{U:function(){return ne}});var t=e(32735),l=e(77981),a=e(84642),g=e(61489),E=e(60216),n=e.n(E),m=e(67879),r=e(15062),i=e(8471),o=e(77061),c=e(8365),u=e(3042);const p=(0,i.ZP)(u.Z)`
  > circle {
    fill: ${({theme:d})=>d.colors.neutral150};
  }
  > path {
    fill: ${({theme:d})=>d.colors.neutral600};
  }
`,v=(0,i.ZP)(l.x)`
  border-radius: 26px;

  svg {
    height: ${({theme:d})=>d.spaces[6]};
    width: ${({theme:d})=>d.spaces[6]};

    > path {
      fill: ${({theme:d})=>d.colors.neutral600};
    }
  }

  &:hover {
    color: ${({theme:d})=>d.colors.primary600} !important;
    ${c.Z} {
      color: ${({theme:d})=>d.colors.primary600} !important;
    }

    ${p} {
      > circle {
        fill: ${({theme:d})=>d.colors.primary600};
      }
      > path {
        fill: ${({theme:d})=>d.colors.neutral100};
      }
    }
  }

  &:active {
    ${c.Z} {
      color: ${({theme:d})=>d.colors.primary600};
    }

    ${p} {
      > circle {
        fill: ${({theme:d})=>d.colors.primary600};
      }
      > path {
        fill: ${({theme:d})=>d.colors.neutral100};
      }
    }
  }
`;function s({children:d,...b}){return t.createElement(v,{as:"button",background:"neutral0",border:"neutral150",paddingBottom:3,paddingLeft:4,paddingRight:4,paddingTop:3,shadow:"filterShadow",...b},t.createElement(a.k,{gap:2},t.createElement(p,{"aria-hidden":!0}),t.createElement(c.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral500"},d)))}s.propTypes={children:n().node.isRequired};var h=e(74323),C=e(14763),M=e(99320),T=e(9435),O=e(9379),I=e(79624),L=e(10710),w=e(97037),P=e(2846),A=e(4987),U=e(49086),x=e(18318),J=e(75322),_=e(37405),V=e(94958),G=e(92802),q=e(51968),ee=e(69242),S=e(69997),k=e(2121),te=e(46111),B=e(68886);const me=(0,i.ZP)(h.ML)`
  padding-left: ${({theme:d})=>d.spaces[7]};
`,pe=(0,i.ZP)(a.k)`
  > * {
    flex-grow: 1;
  }
`,Ee=(0,i.ZP)(U.sN)`
  color: ${({theme:d})=>d.colors.danger600};
`,ve=(0,i.ZP)(x.xz)`
  :hover,
  :focus {
    background-color: ${({theme:d})=>d.colors.neutral100};
  }

  > span {
    font-size: 0;
  }
`,ye=(0,i.ZP)(C.h)`
  align-items: center;
  border-radius: ${({theme:d})=>d.borderRadius};
  display: flex;
  justify-content: center;

  :hover,
  :focus {
    background-color: ${({theme:d})=>d.colors.neutral100};
  }

  svg {
    height: auto;
    width: ${({theme:d})=>d.spaces[3]}};
  }
`,he=(0,B.s)();function Se(){return t.createElement(l.x,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",display:"block",hasRadius:!0,padding:6,shadow:"tableShadow"})}function le({id:d,index:b,canDelete:K,canReorder:ae,canUpdate:N,isOpen:oe=!1,stagesCount:j}){const H=f=>`${f+1} of ${j}`,z=f=>{Q(R({id:"dnd.grab-item",defaultMessage:"{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel."},{item:$.value,position:H(f)}))},we=f=>{Q(R({id:"dnd.drop-item",defaultMessage:"{item}, dropped. Final position in list: {position}."},{item:$.value,position:H(f)}))},Oe=()=>{Q(R({id:"dnd.cancel-item",defaultMessage:"{item}, dropped. Re-order cancelled."},{item:$.value}))},Me=(f,D)=>{Q(R({id:"dnd.reorder",defaultMessage:"{item}, moved. New position in list: {position}."},{item:$.value,position:H(f)})),Z((0,o.FP)(D,f))},Pe=()=>{se(!0)},[ie,Q]=t.useState(null),{formatMessage:R}=(0,m.Z)(),{trackUsage:Re}=(0,g.rS)(),Z=(0,r.I0)(),Ce=(0,g.lm)(),[re,We]=t.useState(oe),[Ae,se]=t.useState(!1),[$,ce,De]=(0,G.U$)(`stages.${b}.name`),[Y,de,Ie]=(0,G.U$)(`stages.${b}.color`),[F,ue,Le]=(0,G.U$)(`stages.${b}.permissions`),ke=(0,r.v9)(te.g$),[{handlerId:Be,isDragging:be,handleKeyDown:xe},Ne,Ue,$e,fe]=(0,ee.Y9)(ae,{index:b,item:{name:$.value},onGrabItem:z,onDropItem:we,onMoveItem:Me,onCancel:Oe,type:k.uL.STAGE}),Ke=(0,S.FE)(Ne,Ue),Ze=he.map(({hex:f,name:D})=>({value:f,label:R({id:"Settings.review-workflows.stage.color.name",defaultMessage:"{name}"},{name:D}),color:f})),{themeColorName:Fe}=(0,B.k)(Y.value)??{},ge=ke.filter(f=>f.code!=="strapi-super-admin");return t.useEffect(()=>{fe((0,q.rX)(),{captureDraggingState:!1})},[fe,b]),t.createElement(l.x,{ref:Ke},ie&&t.createElement(M.T,{"aria-live":"assertive"},ie),be?t.createElement(Se,null):t.createElement(T.U,{size:"S",variant:"primary",onToggle:()=>{We(!re),re||Re("willEditStage")},expanded:re,shadow:"tableShadow",error:ce.error??de?.error??ue?.error??!1,hasErrorMessage:!1},t.createElement(O.B,{title:$.value,togglePosition:"left",action:(K||N)&&t.createElement(a.k,null,t.createElement(x.fC,null,t.createElement(ve,{size:"S",endIcon:null,paddingLeft:2,paddingRight:2},t.createElement(J.Z,{"aria-hidden":!0,focusable:!1}),t.createElement(M.T,{as:"span"},R({id:"[tbdb].components.DynamicZone.more-actions",defaultMessage:"More actions"}))),t.createElement(x.VY,{popoverPlacement:"bottom-end",zIndex:2},t.createElement(x.rl,null,N&&t.createElement(U.sN,{onClick:()=>Z((0,o.ES)(d))},R({id:"Settings.review-workflows.stage.delete",defaultMessage:"Duplicate stage"})),K&&t.createElement(Ee,{onClick:()=>Z((0,o._V)(d))},R({id:"Settings.review-workflows.stage.delete",defaultMessage:"Delete"}))))),N&&t.createElement(ye,{background:"transparent",forwardedAs:"div",hasRadius:!0,role:"button",noBorder:!0,tabIndex:0,"data-handler-id":Be,ref:$e,label:R({id:"Settings.review-workflows.stage.drag",defaultMessage:"Drag"}),onClick:f=>f.stopPropagation(),onKeyDown:xe},t.createElement(_.Z,null)))}),t.createElement(I.v,{padding:6,background:"neutral0",hasRadius:!0},t.createElement(L.r,{gap:4},t.createElement(w.P,{col:6},t.createElement(P.o,{...$,id:$.name,disabled:!N,label:R({id:"Settings.review-workflows.stage.name.label",defaultMessage:"Stage name"}),error:ce.error??!1,onChange:f=>{De.setValue(f.target.value),Z((0,o.xn)(d,{name:f.target.value}))},required:!0})),t.createElement(w.P,{col:6},t.createElement(A.q4,{disabled:!N,error:de?.error??!1,id:Y.name,required:!0,label:R({id:"content-manager.reviewWorkflows.stage.color",defaultMessage:"Color"}),onChange:f=>{Ie.setValue(f),Z((0,o.xn)(d,{color:f}))},value:Y.value.toUpperCase(),startIcon:t.createElement(a.k,{as:"span",height:2,background:Y.value,borderColor:Fe==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2})},Ze.map(({value:f,label:D,color:X})=>{const{themeColorName:Ge}=(0,B.k)(X);return t.createElement(A.ag,{value:f,key:f,startIcon:t.createElement(a.k,{as:"span",height:2,background:X,borderColor:Ge==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2})},D)}))),t.createElement(w.P,{col:6},ge.length===0?t.createElement(g.X0,{description:{id:"Settings.review-workflows.stage.permissions.noPermissions.description",defaultMessage:"You don\u2019t have the permission to see roles"},intlLabel:{id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"},name:F.name}):t.createElement(a.k,{alignItems:"flex-end",gap:3},t.createElement(pe,{grow:1},t.createElement(h.NU,{...F,disabled:!N,error:ue.error??!1,id:F.name,label:R({id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"}),onChange:f=>{const D=f.map(X=>({role:parseInt(X,10),action:"admin::review-workflows.stage.transition"}));Le.setValue(D),Z((0,o.xn)(d,{permissions:D}))},placeholder:R({id:"Settings.review-workflows.stage.permissions.placeholder",defaultMessage:"Select a role"}),required:!0,value:(F.value??[]).map(f=>`${f.role}`),withTags:!0},[{label:R({id:"Settings.review-workflows.stage.permissions.allRoles.label",defaultMessage:"All roles"}),children:ge.map(f=>({value:`${f.id}`,label:f.name}))}].map(f=>"children"in f?t.createElement(h.Ab,{key:f.label,label:f.label,values:f.children.map(D=>D.value)},f.children.map(D=>t.createElement(me,{key:D.value,value:D.value},D.label))):t.createElement(h.ML,{key:f.value,value:f.value},f.label)))),t.createElement(C.h,{disabled:!N,icon:t.createElement(V.Z,null),label:R({id:"Settings.review-workflows.stage.permissions.apply.label",defaultMessage:"Apply to all stages"}),size:"L",variant:"secondary",onClick:()=>Pe(F.value)})))))),t.createElement(g.QH.Root,{iconRightButton:null,isOpen:Ae,onToggleDialog:()=>se(!1),onConfirm:()=>{Z((0,o.Mu)({permissions:F.value})),se(!1),Ce({type:"success",message:R({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy.success",defaultMessage:"Applied roles to all other stages of the workflow"})})},variantRightButton:"primary"},t.createElement(g.QH.Body,null,t.createElement(c.Z,{textAlign:"center",variant:"omega"},R({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy",defaultMessage:"Roles that can change that stage will be applied to all the other stages."})))))}le.propTypes=n().shape({id:n().number.isRequired,color:n().string.isRequired,canDelete:n().bool.isRequired,canReorder:n().bool.isRequired,canUpdate:n().bool.isRequired,stagesCount:n().number.isRequired}).isRequired;const Te=(0,i.ZP)(l.x)`
  transform: translateX(-50%);
`;function ne({canDelete:d,canUpdate:b,stages:K}){const{formatMessage:ae}=(0,m.Z)(),N=(0,r.I0)(),{trackUsage:oe}=(0,g.rS)();return t.createElement(a.k,{direction:"column",gap:6,width:"100%"},t.createElement(l.x,{position:"relative",spacing:4,width:"100%"},t.createElement(Te,{background:"neutral200",height:"100%",left:"50%",position:"absolute",top:"0",width:2,zIndex:1}),t.createElement(a.k,{direction:"column",alignItems:"stretch",gap:6,zIndex:2,position:"relative",as:"ol"},K.map((j,H)=>{const z=j?.id??j.__temp_key__;return t.createElement(l.x,{key:`stage-${z}`,as:"li"},t.createElement(le,{id:z,index:H,isOpen:!j.id,canDelete:K.length>1&&d,canReorder:K.length>1,canUpdate:b,stagesCount:K.length}))}))),b&&t.createElement(s,{type:"button",onClick:()=>{N((0,o.CI)({name:""})),oe("willCreateStage")}},ae({id:"Settings.review-workflows.stage.add",defaultMessage:"Add new stage"})))}ne.defaultProps={canDelete:!0,canUpdate:!0,stages:[]},ne.propTypes={canDelete:n().bool,canUpdate:n().bool,stages:n().arrayOf(n().shape({id:n().number,__temp_key__:n().number,name:n().string.isRequired}))}},165:function(W,y,e){e.d(y,{Y:function(){return M}});var t=e(32735),l=e(74323),a=e(8365),g=e(10710),E=e(97037),n=e(2846),m=e(61489),r=e(92802),i=e(60216),o=e.n(i),c=e(67879),u=e(15062),p=e(8471),v=e(77061),s=e(46111);const h=(0,p.ZP)(l.ML)`
  padding-left: ${({theme:T})=>T.spaces[7]};
`,C=(0,p.ZP)(a.Z)`
  font-style: italic;
`;function M({canUpdate:T}){const{formatMessage:O,locale:I}=(0,c.Z)(),L=(0,u.I0)(),{collectionTypes:w,singleTypes:P}=(0,u.v9)(s.HK),A=(0,u.v9)(s.DV),U=(0,u.v9)(s.D6),[x,J,_]=(0,r.U$)("name"),[V,G,q]=(0,r.U$)("contentTypes"),ee=(0,m.Xe)(I,{sensitivity:"base"});return t.createElement(g.r,{background:"neutral0",hasRadius:!0,gap:4,padding:6,shadow:"tableShadow"},t.createElement(E.P,{col:6},t.createElement(n.o,{...x,id:x.name,disabled:!T,label:O({id:"Settings.review-workflows.workflow.name.label",defaultMessage:"Workflow Name"}),error:J.error??!1,onChange:S=>{L((0,v.rI)({name:S.target.value})),_.setValue(S.target.value)},required:!0})),t.createElement(E.P,{col:6},t.createElement(l.NU,{...V,customizeContent:S=>O({id:"Settings.review-workflows.workflow.contentTypes.displayValue",defaultMessage:"{count} {count, plural, one {content type} other {content types}} selected"},{count:S.length}),disabled:!T,error:G.error??!1,id:V.name,label:O({id:"Settings.review-workflows.workflow.contentTypes.label",defaultMessage:"Associated to"}),onChange:S=>{L((0,v.rI)({contentTypes:S})),q.setValue(S)},placeholder:O({id:"Settings.review-workflows.workflow.contentTypes.placeholder",defaultMessage:"Select"})},[...w.length>0?[{label:O({id:"Settings.review-workflows.workflow.contentTypes.collectionTypes.label",defaultMessage:"Collection Types"}),children:[...w].sort((S,k)=>ee.compare(S.info.displayName,k.info.displayName)).map(S=>({label:S.info.displayName,value:S.uid}))}]:[],...P.length>0?[{label:O({id:"Settings.review-workflows.workflow.contentTypes.singleTypes.label",defaultMessage:"Single Types"}),children:[...P].map(S=>({label:S.info.displayName,value:S.uid}))}]:[]].map(S=>"children"in S?t.createElement(l.Ab,{key:S.label,label:S.label,values:S.children.map(k=>k.value.toString())},S.children.map(k=>{const{name:te}=U.find(B=>(A&&B.id!==A.id||!A)&&B.contentTypes.includes(k.value))??{};return t.createElement(h,{key:k.value,value:k.value},O({id:"Settings.review-workflows.workflow.contentTypes.assigned.notice",defaultMessage:"{label} {name, select, undefined {} other {<i>(assigned to <em>{name}</em> workflow)</i>}}"},{label:k.label,name:te,em:(...B)=>t.createElement(a.Z,{as:"em",fontWeight:"bold"},B),i:(...B)=>t.createElement(C,null,B)}))})):t.createElement(l.ML,{key:S.value,value:S.value},S.label)))))}M.defaultProps={canUpdate:!0},M.propTypes={canUpdate:o().bool}},2121:function(W,y,e){e.d(y,{$k:function(){return v},Ef:function(){return T},FT:function(){return C},Nj:function(){return u},Ot:function(){return o},QM:function(){return r},VS:function(){return s},_X:function(){return O},bc:function(){return c},gu:function(){return a},k_:function(){return p},lv:function(){return h},qZ:function(){return m},rg:function(){return E},sN:function(){return l},uL:function(){return M},x4:function(){return i},yq:function(){return g},zn:function(){return n}});var t=e(41865);const l="settings_review-workflows",a="Settings/Review_Workflows/RESET_WORKFLOW",g="Settings/Review_Workflows/SET_CONTENT_TYPES",E="Settings/Review_Workflows/SET_IS_LOADING",n="Settings/Review_Workflows/SET_ROLES",m="Settings/Review_Workflows/SET_WORKFLOW",r="Settings/Review_Workflows/SET_WORKFLOWS",i="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",o="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",c="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",u="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",p="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",v="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",s="Settings/Review_Workflows/WORKFLOW_UPDATE",h={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},C=t.W.colors.primary600,M={STAGE:"stage"},T="numberOfWorkflows",O="stagesPerWorkflow"},32329:function(W,y,e){e.d(y,{n:function(){return g}});var t=e(32735),l=e(61489),a=e(20108);function g(E={}){const{get:n}=(0,l.kY)(),{id:m="",...r}=E,i={populate:"stages"},{data:o,isLoading:c,status:u,refetch:p}=(0,a.useQuery)(["review-workflows","workflows",m],async()=>(await n(`/admin/review-workflows/workflows/${m}`,{params:{...i,...r}})).data),v=t.useMemo(()=>m&&o?.data?[o.data]:Array.isArray(o?.data)?o.data:[],[o?.data,m]);return{meta:t.useMemo(()=>o?.meta??{},[o?.meta]),workflows:v,isLoading:c,status:u,refetch:p}}},79989:function(W,y,e){e.d(y,{E:function(){return a},I:function(){return g}});var t=e(97889),l=e(2121);const a={serverState:{contentTypes:{collectionTypes:[],singleTypes:[]},roles:[],workflow:null,workflows:[]},clientState:{currentWorkflow:{data:{name:"",contentTypes:[],stages:[],permissions:void 0}},isLoading:!0}};function g(n=a,m){return(0,t.Uy)(n,r=>{const{payload:i}=m;switch(m.type){case l.yq:{r.serverState.contentTypes=i;break}case l.rg:{r.clientState.isLoading=i;break}case l.zn:{r.serverState.roles=i;break}case l.qZ:{const o=i;o&&(r.serverState.workflow=o,r.clientState.currentWorkflow.data={...o,stages:o.stages.map(c=>({...c,color:c?.color??l.FT}))});break}case l.QM:{r.serverState.workflows=i;break}case l.gu:{r.clientState=a.clientState,r.serverState=a.serverState;break}case l.x4:{const{stageId:o}=i,{currentWorkflow:c}=n.clientState;r.clientState.currentWorkflow.data.stages=c.data.stages.filter(u=>(u?.id??u.__temp_key__)!==o);break}case l.Ot:{const{currentWorkflow:o}=n.clientState;o.data||(r.clientState.currentWorkflow.data={stages:[]});const c=E(r.clientState.currentWorkflow.data.stages);r.clientState.currentWorkflow.data.stages.push({...i,color:i?.color??l.FT,__temp_key__:c});break}case l.bc:{const{currentWorkflow:o}=n.clientState,{id:c}=i,u=o.data.stages.findIndex(v=>(v?.id??v?.__temp_key__)===c),p=o.data.stages[u];r.clientState.currentWorkflow.data.stages.splice(u+1,0,{...p,id:void 0,__temp_key__:E(r.clientState.currentWorkflow.data.stages)});break}case l.Nj:{const{currentWorkflow:o}=n.clientState,{stageId:c,...u}=i;r.clientState.currentWorkflow.data.stages=o.data.stages.map(p=>(p.id??p.__temp_key__)===c?{...p,...u}:p);break}case l.k_:{const{currentWorkflow:o}=n.clientState;r.clientState.currentWorkflow.data.stages=o.data.stages.map(c=>({...c,...i}));break}case l.$k:{const{currentWorkflow:{data:{stages:o}}}=n.clientState,{newIndex:c,oldIndex:u}=i;if(c>=0&&c<o.length){const p=o[u];let v=[...o];v.splice(u,1),v.splice(c,0,p),r.clientState.currentWorkflow.data.stages=v}break}case l.VS:{r.clientState.currentWorkflow.data={...r.clientState.currentWorkflow.data,...i};break}default:break}})}const E=(n=[])=>{const m=n.map(r=>r.id??r.__temp_key__);return Math.max(...m,-1)+1}},46111:function(W,y,e){e.d(y,{CA:function(){return u},D6:function(){return o},DV:function(){return i},HK:function(){return m},RR:function(){return v},bH:function(){return c},g$:function(){return r},xU:function(){return p}});var t=e(89793),l=e.n(t),a=e(98178),g=e(2121),E=e(79989);const n=s=>s[g.sN]??E.E,m=(0,a.P1)(n,({serverState:{contentTypes:s}})=>s),r=(0,a.P1)(n,({serverState:{roles:s}})=>s),i=(0,a.P1)(n,({clientState:{currentWorkflow:s}})=>s.data),o=(0,a.P1)(n,({serverState:{workflows:s}})=>s),c=(0,a.P1)(n,({serverState:s,clientState:{currentWorkflow:h}})=>!l()(s.workflow,h.data)),u=(0,a.P1)(n,({serverState:s,clientState:{currentWorkflow:h}})=>!(s.workflow?.stages??[]).every(C=>!!h.data.stages.find(({id:M})=>M===C.id))),p=(0,a.P1)(n,({clientState:{isLoading:s}})=>s),v=(0,a.P1)(n,({serverState:s})=>s)},68886:function(W,y,e){e.d(y,{k:function(){return a},s:function(){return g}});var t=e(41865),l=e(2121);function a(E){if(!E)return null;const m=Object.entries(t.W.colors).filter(([,r])=>r.toUpperCase()===E.toUpperCase()).reduce((r,[i])=>(l.lv?.[i]&&(r=i),r),null);return m?{themeColorName:m,name:l.lv[m]}:null}function g(){return Object.entries(l.lv).map(([E,n])=>({hex:t.W.colors[E].toUpperCase(),name:n}))}},82920:function(W,y,e){e.d(y,{V:function(){return g}});var t=e(3040),l=e.n(t),a=e(24346);async function g({values:E,formatMessage:n}){const m=a.Ry({contentTypes:a.IX().of(a.Z_()),name:a.Z_().max(255,n({id:"Settings.review-workflows.validation.name.max-length",defaultMessage:"Name can not be longer than 255 characters"})).required(),stages:a.IX().of(a.Ry().shape({name:a.Z_().required(n({id:"Settings.review-workflows.validation.stage.name",defaultMessage:"Name is required"})).max(255,n({id:"Settings.review-workflows.validation.stage.max-length",defaultMessage:"Name can not be longer than 255 characters"})).test("unique-name",n({id:"Settings.review-workflows.validation.stage.duplicate",defaultMessage:"Stage name must be unique"}),function(r){const{options:{context:i}}=this;return i.stages.filter(o=>o.name===r).length===1}),color:a.Z_().required(n({id:"Settings.review-workflows.validation.stage.color",defaultMessage:"Color is required"})).matches(/^#(?:[0-9a-fA-F]{3}){1,2}$/i),permissions:a.IX(a.Ry({role:a.Rx().strict().typeError(n({id:"Settings.review-workflows.validation.stage.permissions.role.number",defaultMessage:"Role must be of type number"})).required,action:a.Z_().required({id:"Settings.review-workflows.validation.stage.permissions.action.required",defaultMessage:"Action is a required argument"})})).strict()})).min(1)});try{return await m.validate(E,{abortEarly:!1,context:E}),!0}catch(r){let i={};return r instanceof a.p8&&r.inner.forEach(o=>{l()(i,o.path,o.message)}),i}}},90431:function(W,y,e){e.d(y,{Q:function(){return o}});var t=e(74512),l=e(32735),a=e(8471),g=e(73290),E=e(65351),n=e(42561),m=e(84642),r=e(8365);const i=(0,a.ZP)(E.G)`
  text-decoration: none;

  &[aria-disabled='true'] {
    ${g.sg}
    &:active {
      ${g.sg}
    }
  }

  &:hover {
    ${g.yP}
  }

  &:active {
    ${g.tB}
  }

  ${g.PD}
`,o=l.forwardRef(({variant:c="default",startIcon:u,endIcon:p,disabled:v=!1,children:s,size:h="S",as:C=n.f,...M},T)=>{const O=h==="S"?2:"10px",I=4;return(0,t.jsxs)(i,{ref:T,"aria-disabled":v,size:h,variant:c,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:O,paddingLeft:I,paddingRight:I,paddingTop:O,pointerEvents:v?"none":void 0,...M,as:C||n.f,children:[u&&(0,t.jsx)(m.k,{"aria-hidden":!0,children:u}),(0,t.jsx)(r.Z,{variant:h==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:s}),p&&(0,t.jsx)(m.k,{"aria-hidden":!0,children:p})]})});o.displayName="LinkButton"}}]);
