"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[349],{61575:function(M,u,e){e.d(u,{r:function(){return f}});var t=e(74512),n=e(77981),s=e(74506),i=e.n(s);function v(l,E,g){if(!l||!E||!g)return{display:"none"};const{x:o,y:a}=g;return{transform:`translate(${o}px, ${a}px)`}}const f=({renderItem:l})=>{const{itemType:E,isDragging:g,item:o,initialOffset:a,currentOffset:r,mouseOffset:w}=(0,s.useDragLayer)(d=>({item:d.getItem(),itemType:d.getItemType(),initialOffset:d.getInitialSourceClientOffset(),currentOffset:d.getSourceClientOffset(),isDragging:d.isDragging(),mouseOffset:d.getClientOffset()}));return g?(0,t.jsx)(n.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%",children:(0,t.jsx)(n.x,{style:v(a,r,w),children:l({type:E,item:o})})}):null}},98866:function(M,u,e){e.d(u,{q:function(){return i}});var t=e(32735),n=e(61489),s=e(20108);function i({enabled:v}={enabled:!0}){const{get:f}=(0,n.kY)(),{data:l,isError:E,isLoading:g}=(0,s.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:r}}=await f("/admin/license-limit-information");return r},{enabled:v}),o=t.useMemo(()=>l??{},[l]),a=t.useCallback(r=>(o?.features??[]).find(d=>d.name===r)?.options??{},[o?.features]);return{license:o,getFeature:a,isError:E,isLoading:g}}},27187:function(M,u,e){e.d(u,{eJ:function(){return P},lx:function(){return D},h4:function(){return T},fC:function(){return A}});var t=e(32735),n=e(99226),s=e(95162),i=e(56932),v=e(64092),f=e(61489),l=e(70788),E=e(67879),g=e(61575),o=e(2121),a=e(84642),r=e(8365),w=e(91917),d=e(60216),h=e.n(d),y=e(8471);const S=(0,y.ZP)(a.k)`
  svg path {
    fill: ${({theme:O})=>O.colors.neutral600};
  }
`;function L({name:O}){return t.createElement(a.k,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,f.Q1)(300)},t.createElement(S,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},t.createElement(w.Z,{width:`${8/16}rem`})),t.createElement(r.Z,{fontWeight:"bold"},O))}L.propTypes={name:h().string.isRequired};function p({type:O,item:C}){switch(O){case o.uL.STAGE:return t.createElement(L,{...C});default:return null}}function D(){return t.createElement(g.r,{renderItem:p})}function A({children:O}){return t.createElement(n.A,null,t.createElement(s.o,{tabIndex:-1},t.createElement(i.D,null,O)))}function P({href:O}){const{formatMessage:C}=(0,E.Z)();return t.createElement(f.rU,{startIcon:t.createElement(l.Z,null),to:O},C({id:"global.back",defaultMessage:"Back"}))}function T({title:O,subtitle:C,navigationAction:R,primaryAction:W}){return t.createElement(t.Fragment,null,t.createElement(f.SL,{name:O}),t.createElement(v.T,{navigationAction:R,primaryAction:W,title:O,subtitle:C}))}},90562:function(M,u,e){e.d(u,{uT:function(){return p},fC:function(){return P},Dx:function(){return L}});var t=e(32735),n=e(8365),s=e(84642),i=e(21223),v=e(87674),f=e(77981),l=e(14763),E=e(90431),g=e(98610),o=e(60216),a=e.n(o),r=e(67879),w=e(8471),d=e.p+"0cd5f8915b265d5b1856.png";const h="limits-title",y="https://strapi.io/pricing-cloud",S="https://strapi.io/contact-sales";function L({children:T}){return t.createElement(n.Z,{variant:"alpha",id:h},T)}L.propTypes={children:a().node.isRequired};function p({children:T}){return t.createElement(n.Z,{variant:"omega"},T)}p.propTypes={children:a().node.isRequired};function D(){const{formatMessage:T}=(0,r.Z)();return t.createElement(s.k,{gap:2,paddingTop:4},t.createElement(E.Q,{variant:"default",isExternal:!0,href:y},T({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(E.Q,{variant:"tertiary",isExternal:!0,href:S},T({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const A=w.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:T})=>`-${T.spaces[7]}`};
  margin-top: ${({theme:T})=>`-${T.spaces[7]}`};
  width: 360px;
`;function P({children:T,isOpen:O,onClose:C}){const{formatMessage:R}=(0,r.Z)();return O?t.createElement(i.P,{labelledBy:h},t.createElement(v.f,null,t.createElement(s.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(s.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},T,t.createElement(D,null)),t.createElement(s.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(A,{src:d,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(f.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(l.h,{icon:t.createElement(g.Z,null),"aria-label":R({id:"global.close",defaultMessage:"Close"}),onClick:C})))))):null}P.defaultProps={isOpen:!1},P.propTypes={children:a().node.isRequired,isOpen:a().bool,onClose:a().func.isRequired}},2121:function(M,u,e){e.d(u,{$k:function(){return d},Ef:function(){return p},FT:function(){return S},Nj:function(){return r},Ot:function(){return o},QM:function(){return E},VS:function(){return h},_X:function(){return D},bc:function(){return a},gu:function(){return s},k_:function(){return w},lv:function(){return y},qZ:function(){return l},rg:function(){return v},sN:function(){return n},uL:function(){return L},x4:function(){return g},yq:function(){return i},zn:function(){return f}});var t=e(41865);const n="settings_review-workflows",s="Settings/Review_Workflows/RESET_WORKFLOW",i="Settings/Review_Workflows/SET_CONTENT_TYPES",v="Settings/Review_Workflows/SET_IS_LOADING",f="Settings/Review_Workflows/SET_ROLES",l="Settings/Review_Workflows/SET_WORKFLOW",E="Settings/Review_Workflows/SET_WORKFLOWS",g="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",o="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",a="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",r="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",w="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",d="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",h="Settings/Review_Workflows/WORKFLOW_UPDATE",y={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},S=t.W.colors.primary600,L={STAGE:"stage"},p="numberOfWorkflows",D="stagesPerWorkflow"},32329:function(M,u,e){e.d(u,{n:function(){return i}});var t=e(32735),n=e(61489),s=e(20108);function i(v={}){const{get:f}=(0,n.kY)(),{id:l="",...E}=v,g={populate:"stages"},{data:o,isLoading:a,status:r,refetch:w}=(0,s.useQuery)(["review-workflows","workflows",l],async()=>(await f(`/admin/review-workflows/workflows/${l}`,{params:{...g,...E}})).data),d=t.useMemo(()=>l&&o?.data?[o.data]:Array.isArray(o?.data)?o.data:[],[o?.data,l]);return{meta:t.useMemo(()=>o?.meta??{},[o?.meta]),workflows:d,isLoading:a,status:r,refetch:w}}},32033:function(M,u,e){e.r(u),e.d(u,{default:function(){return z}});var t=e(32735),n=e(61489),s=e(15062),i=e(30305),v=e(84642),f=e(35547),l=e(23699),E=e(22116),g=e(41013),o=e(45037),a=e(27947),r=e(8365),w=e(99320),d=e(1690),h=e(14763),y=e(82064),S=e(63318),L=e(94997),p=e(67879),D=e(20108),A=e(53038),P=e(8471),T=e(90769),O=e(98866),C=e(27187),R=e(90562),W=e(2121),Y=e(32329);const V=(0,P.ZP)(n.rU)`
  align-items: center;
  height: ${(0,n.Q1)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:c})=>`${c.spaces[2]}}`};
  width: ${(0,n.Q1)(32)};

  svg {
    height: ${(0,n.Q1)(12)};
    width: ${(0,n.Q1)(12)};

    path {
      fill: ${({theme:c})=>c.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:c})=>c.colors.neutral800};
      }
    }
  }
`;function X(){const{formatMessage:c}=(0,p.Z)(),{push:k}=(0,A.k6)(),{collectionTypes:J,singleTypes:b,isLoading:_}=(0,T.G)(),{meta:x,workflows:$,isLoading:N,refetch:q}=(0,Y.n)(),[F,U]=t.useState(null),[ee,B]=t.useState(!1),{del:te}=(0,n.kY)(),{formatAPIError:ne}=(0,n.So)(),Z=(0,n.lm)(),{getFeature:oe,isLoading:G}=(0,O.q)(),{trackUsage:Q}=(0,n.rS)(),ae=(0,s.v9)(i._),{allowedActions:{canCreate:H,canDelete:se}}=(0,n.ss)(ae.settings["review-workflows"]),I=oe("review-workflows"),{mutateAsync:re,isLoading:le}=(0,D.useMutation)(async({workflowId:m,stages:K})=>{const{data:{data:j}}=await te(`/admin/review-workflows/workflows/${m}`,{data:K});return j},{onSuccess(){Z({type:"success",message:{id:"notification.success.deleted",defaultMessage:"Deleted"}})}}),ie=m=>[...J,...b].find(j=>j.uid===m).info.displayName,de=m=>{U(m)},ce=()=>{U(null)},ue=async()=>{try{const m=await re({workflowId:F});return await q(),U(null),m}catch(m){return Z({type:"warning",message:ne(m)}),null}};return t.useEffect(()=>{!N&&!G&&I?.[W.Ef]&&x?.workflowCount>parseInt(I[W.Ef],10)&&B(!0)},[G,N,I,x?.workflowCount,x.workflowsTotal]),t.createElement(t.Fragment,null,t.createElement(C.h4,{primaryAction:H&&t.createElement(n.Qj,{startIcon:t.createElement(y.Z,null),size:"S",to:"/settings/review-workflows/create",onClick:m=>{I?.[W.Ef]&&x?.workflowCount>=parseInt(I[W.Ef],10)?(m.preventDefault(),B(!0)):Q("willCreateWorkflow")}},c({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),subtitle:c({id:"Settings.review-workflows.list.page.subtitle",defaultMessage:"Manage your content review process"}),title:c({id:"Settings.review-workflows.list.page.title",defaultMessage:"Review Workflows"})}),t.createElement(C.fC,null,N||_?t.createElement(v.k,{justifyContent:"center"},t.createElement(f.a,null,c({id:"Settings.review-workflows.page.list.isLoading",defaultMessage:"Workflows are loading"}))):t.createElement(l.i,{colCount:3,footer:H&&t.createElement(E.c,{icon:t.createElement(y.Z,null),onClick:()=>{I?.[W.Ef]&&x?.workflowCount>=parseInt(I[W.Ef],10)?B(!0):(k("/settings/review-workflows/create"),Q("willCreateWorkflow"))}},c({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),rowCount:1},t.createElement(g.h,null,t.createElement(o.Tr,null,t.createElement(a.Th,null,t.createElement(r.Z,{variant:"sigma"},c({id:"Settings.review-workflows.list.page.list.column.name.title",defaultMessage:"Name"}))),t.createElement(a.Th,null,t.createElement(r.Z,{variant:"sigma"},c({id:"Settings.review-workflows.list.page.list.column.stages.title",defaultMessage:"Stages"}))),t.createElement(a.Th,null,t.createElement(r.Z,{variant:"sigma"},c({id:"Settings.review-workflows.list.page.list.column.contentTypes.title",defaultMessage:"Content Types"}))),t.createElement(a.Th,null,t.createElement(w.T,null,c({id:"Settings.review-workflows.list.page.list.column.actions.title",defaultMessage:"Actions"}))))),t.createElement(d.p,null,$.map(m=>t.createElement(o.Tr,{...(0,n.X7)({fn(K){K.target.nodeName!=="BUTTON"&&k(`/settings/review-workflows/${m.id}`)}}),key:`workflow-${m.id}`},t.createElement(a.Td,{width:(0,n.Q1)(250)},t.createElement(r.Z,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0},m.name)),t.createElement(a.Td,null,t.createElement(r.Z,{textColor:"neutral800"},m.stages.length)),t.createElement(a.Td,null,t.createElement(r.Z,{textColor:"neutral800"},(m?.contentTypes??[]).map(ie).join(", "))),t.createElement(a.Td,null,t.createElement(v.k,{alignItems:"center",justifyContent:"end"},t.createElement(V,{to:`/settings/review-workflows/${m.id}`,"aria-label":c({id:"Settings.review-workflows.list.page.list.column.actions.edit.label",defaultMessage:"Edit {name}"},{name:m.name})},t.createElement(S.Z,null)),$.length>1&&se&&t.createElement(h.h,{"aria-label":c({id:"Settings.review-workflows.list.page.list.column.actions.delete.label",defaultMessage:"Delete {name}"},{name:"Default workflow"}),icon:t.createElement(L.Z,null),noBorder:!0,onClick:()=>{de(m.id)}}))))))),t.createElement(n.QH,{bodyText:{id:"Settings.review-workflows.list.page.delete.confirm.body",defaultMessage:"If you remove this worfklow, all stage-related information will be removed for this content-type. Are you sure you want to remove it?"},isConfirmButtonLoading:le,isOpen:!!F,onToggleDialog:ce,onConfirm:ue}),t.createElement(R.fC,{isOpen:ee,onClose:()=>B(!1)},t.createElement(R.Dx,null,c({id:"Settings.review-workflows.list.page.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(R.uT,null,c({id:"Settings.review-workflows.list.page.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})))))}function z(){const c=(0,s.v9)(i._);return t.createElement(n.O4,{permissions:c.settings["review-workflows"].main},t.createElement(X,null))}},22116:function(M,u,e){e.d(u,{c:function(){return g}});var t=e(74512),n=e(8471),s=e(77981),i=e(2775),v=e(84642),f=e(8365);const l=(0,n.ZP)(s.x)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:o})=>o.colors.primary600};
  }
`,E=(0,n.ZP)(s.x)`
  border-radius: 0 0 ${({theme:o})=>o.borderRadius} ${({theme:o})=>o.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,g=({children:o,icon:a,...r})=>(0,t.jsxs)("div",{children:[(0,t.jsx)(i.i,{}),(0,t.jsx)(E,{as:"button",background:"primary100",padding:5,...r,children:(0,t.jsxs)(v.k,{children:[(0,t.jsx)(l,{"aria-hidden":!0,background:"primary200",children:a}),(0,t.jsx)(s.x,{paddingLeft:3,children:(0,t.jsx)(f.Z,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:o})})]})})]})},90431:function(M,u,e){e.d(u,{Q:function(){return o}});var t=e(74512),n=e(32735),s=e(8471),i=e(73290),v=e(65351),f=e(42561),l=e(84642),E=e(8365);const g=(0,s.ZP)(v.G)`
  text-decoration: none;

  &[aria-disabled='true'] {
    ${i.sg}
    &:active {
      ${i.sg}
    }
  }

  &:hover {
    ${i.yP}
  }

  &:active {
    ${i.tB}
  }

  ${i.PD}
`,o=n.forwardRef(({variant:a="default",startIcon:r,endIcon:w,disabled:d=!1,children:h,size:y="S",as:S=f.f,...L},p)=>{const D=y==="S"?2:"10px",A=4;return(0,t.jsxs)(g,{ref:p,"aria-disabled":d,size:y,variant:a,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:D,paddingLeft:A,paddingRight:A,paddingTop:D,pointerEvents:d?"none":void 0,...L,as:S||f.f,children:[r&&(0,t.jsx)(l.k,{"aria-hidden":!0,children:r}),(0,t.jsx)(E.Z,{variant:y==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:h}),w&&(0,t.jsx)(l.k,{"aria-hidden":!0,children:w})]})});o.displayName="LinkButton"},70788:function(M,u,e){e.d(u,{Z:function(){return s}});var t=e(74512);const n=i=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...i,children:(0,t.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),s=n}}]);
