"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[7897],{4468:function(x,d,e){e.d(d,{I:function(){return t},U:function(){return n}});const t="strapi_stage",n="strapi_assignee"},8291:function(x,d,e){e.r(d),e.d(d,{InformationBoxEE:function(){return ee}});var t=e(32735),n=e(61489),r=e(98865),l=e(750),o=e(84642),f=e(70843),u=e(8241),i=e(67879),g=e(20108),T=e(15062),E=e(69997),v=e(97108),A=e(30305),a=e(4468);function R(){const{initialData:O,layout:{uid:y},isSingleType:B,onChange:$}=(0,n.Wq)(),j=(0,T.v9)(A._),{formatMessage:c}=(0,i.Z)(),{formatAPIError:Y}=(0,n.So)(),M=(0,n.lm)(),{put:Z}=(0,n.kY)(),{allowedActions:{canReadUsers:C},isLoading:N}=(0,n.ss)({readUsers:j.settings.users.read}),{users:K,isLoading:G,isError:H}=(0,v.R)({},{enabled:!N&&C}),k=O?.[a.U]??null,U=async({value:m})=>{h.mutate({entityId:O.id,assigneeId:parseInt(m,10),uid:y})},h=(0,g.useMutation)(async({entityId:m,assigneeId:V,uid:z})=>{const W=B?"single-types":"collection-types",{data:{data:P}}=await Z(`/admin/content-manager/${W}/${z}/${m}/assignee`,{data:{id:V}});return $({target:{name:a.U,value:P[a.U]}},!0),P},{onSuccess(){M({type:"success",message:{id:"content-manager.reviewWorkflows.assignee.notification.saved",defaultMessage:"Assignee updated"}})}});return t.createElement(l.g,{name:a.U,id:a.U},t.createElement(o.k,{direction:"column",gap:2,alignItems:"stretch"},t.createElement(f.hQ,{clearLabel:c({id:"content-manager.reviewWorkflows.assignee.clear",defaultMessage:"Clear assignee"}),error:H&&C&&c({id:"content-manager.reviewWorkflows.assignee.error",defaultMessage:"An error occurred while fetching users"})||h.error&&Y(h.error),disabled:!N&&!G&&K.length===0,name:a.U,id:a.U,value:k?k.id:null,onChange:m=>U({value:m}),onClear:()=>U({value:null}),placeholder:c({id:"content-manager.reviewWorkflows.assignee.placeholder",defaultMessage:"Select \u2026"}),label:c({id:"content-manager.reviewWorkflows.assignee.label",defaultMessage:"Assignee"}),loading:G||N||h.isLoading},K.map(m=>t.createElement(u.O,{key:m.id,value:m.id,textValue:(0,E.Gf)(m,c)},(0,E.Gf)(m,c))))))}var S=e(4987),D=e(8365),L=e(35547),w=e(74925),I=e(15667),F=e(98866),p=e(90562),s=e(2121);function X({id:O,layout:y}={},B={}){const{kind:$,uid:j}=y,c=$==="collectionType"?"collection-types":"single-types",{get:Y}=(0,n.kY)(),{data:M,isLoading:Z,refetch:C}=(0,g.useQuery)(["content-manager",c,y.uid,O,"stages"],async()=>{const{data:G}=await Y(`/admin/content-manager/${c}/${j}/${O}/stages`);return G},B),N=t.useMemo(()=>M?.meta??{},[M?.meta]),K=t.useMemo(()=>M?.data??[],[M?.data]);return{meta:N,stages:K,isLoading:Z,refetch:C}}var Q=e(68886);function _(){const{initialData:O,layout:y,isSingleType:B,onChange:$}=(0,n.Wq)(),{put:j}=(0,n.kY)(),{formatMessage:c}=(0,i.Z)(),{formatAPIError:Y}=(0,n.So)(),M=(0,n.lm)(),{meta:Z,stages:C,isLoading:N,refetch:K}=X({id:O.id,layout:y},{enabled:!!O?.id}),{getFeature:G}=(0,F.q)(),[H,k]=t.useState(!1),U=G("review-workflows"),h=O?.[a.I]??null,m=(0,g.useMutation)(async({entityId:W,stageId:P,uid:b})=>{const J=B?"single-types":"collection-types",{data:{data:q}}=await j(`/admin/content-manager/${J}/${b}/${W}/stage`,{data:{id:P}});return $({target:{name:a.I,value:q[a.I]}},!0),await K(),q},{onSuccess(){M({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}})}}),V=async({value:W})=>{try{U?.[s.Ef]&&parseInt(U[s.Ef],10)<Z.workflowCount?k("workflow"):U?.[s._X]&&parseInt(U[s._X],10)<C.length?k("stage"):m.mutateAsync({entityId:O.id,stageId:W,uid:y.uid})}catch{}},{themeColorName:z}=h?.color?(0,Q.k)(h?.color):{};return t.createElement(t.Fragment,null,t.createElement(l.g,{hint:C.length===0&&c({id:"content-manager.reviewWorkflows.stages.no-transition",defaultMessage:"You don\u2019t have the permission to update this stage."}),name:a.I,id:a.I},t.createElement(o.k,{direction:"column",gap:2,alignItems:"stretch"},t.createElement(S.q4,{disabled:C.length===0,error:m.error&&Y(m.error)||null,name:a.I,id:a.I,value:h?.id,onChange:W=>V({value:W}),label:c({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:h&&t.createElement(o.k,{as:"span",height:2,background:h?.color,borderColor:z==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>t.createElement(o.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},t.createElement(D.Z,{textColor:"neutral800",ellipsis:!0},h?.name??""),N?t.createElement(L.a,{small:!0,style:{display:"flex"},"data-testid":"loader"}):null)},C.map(({id:W,color:P,name:b})=>{const{themeColorName:J}=(0,Q.k)(P);return t.createElement(S.ag,{key:W,startIcon:t.createElement(o.k,{height:2,background:P,borderColor:J==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),value:W,textValue:b},b)})),t.createElement(w.J,null),t.createElement(I.c,null))),t.createElement(p.fC,{isOpen:H==="workflow",onClose:()=>k(!1)},t.createElement(p.Dx,null,c({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(p.uT,null,c({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."}))),t.createElement(p.fC,{isOpen:H==="stage",onClose:()=>k(!1)},t.createElement(p.Dx,null,c({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})),t.createElement(p.uT,null,c({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."}))))}function ee(){const{isCreatingEntry:O,layout:{options:y}}=(0,n.Wq)(),B=y?.reviewWorkflows??!1;return t.createElement(r.d.Root,null,t.createElement(r.d.Title,null),B&&!O&&t.createElement(t.Fragment,null,t.createElement(_,null),t.createElement(R,null)),t.createElement(r.d.Body,null))}},98866:function(x,d,e){e.d(d,{q:function(){return l}});var t=e(32735),n=e(61489),r=e(20108);function l({enabled:o}={enabled:!0}){const{get:f}=(0,n.kY)(),{data:u,isError:i,isLoading:g}=(0,r.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:v}}=await f("/admin/license-limit-information");return v},{enabled:o}),T=t.useMemo(()=>u??{},[u]),E=t.useCallback(v=>(T?.features??[]).find(a=>a.name===v)?.options??{},[T?.features]);return{license:T,getFeature:E,isError:i,isLoading:g}}},90562:function(x,d,e){e.d(d,{uT:function(){return w},fC:function(){return p},Dx:function(){return L}});var t=e(32735),n=e(8365),r=e(84642),l=e(21223),o=e(87674),f=e(77981),u=e(14763),i=e(90431),g=e(98610),T=e(60216),E=e.n(T),v=e(67879),A=e(8471),a=e.p+"0cd5f8915b265d5b1856.png";const R="limits-title",S="https://strapi.io/pricing-cloud",D="https://strapi.io/contact-sales";function L({children:s}){return t.createElement(n.Z,{variant:"alpha",id:R},s)}L.propTypes={children:E().node.isRequired};function w({children:s}){return t.createElement(n.Z,{variant:"omega"},s)}w.propTypes={children:E().node.isRequired};function I(){const{formatMessage:s}=(0,v.Z)();return t.createElement(r.k,{gap:2,paddingTop:4},t.createElement(i.Q,{variant:"default",isExternal:!0,href:S},s({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(i.Q,{variant:"tertiary",isExternal:!0,href:D},s({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const F=A.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:s})=>`-${s.spaces[7]}`};
  margin-top: ${({theme:s})=>`-${s.spaces[7]}`};
  width: 360px;
`;function p({children:s,isOpen:X,onClose:Q}){const{formatMessage:_}=(0,v.Z)();return X?t.createElement(l.P,{labelledBy:R},t.createElement(o.f,null,t.createElement(r.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(r.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},s,t.createElement(I,null)),t.createElement(r.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(F,{src:a,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(f.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(u.h,{icon:t.createElement(g.Z,null),"aria-label":_({id:"global.close",defaultMessage:"Close"}),onClick:Q})))))):null}p.defaultProps={isOpen:!1},p.propTypes={children:E().node.isRequired,isOpen:E().bool,onClose:E().func.isRequired}},2121:function(x,d,e){e.d(d,{$k:function(){return a},Ef:function(){return w},FT:function(){return D},Nj:function(){return v},Ot:function(){return T},QM:function(){return i},VS:function(){return R},_X:function(){return I},bc:function(){return E},gu:function(){return r},k_:function(){return A},lv:function(){return S},qZ:function(){return u},rg:function(){return o},sN:function(){return n},uL:function(){return L},x4:function(){return g},yq:function(){return l},zn:function(){return f}});var t=e(41865);const n="settings_review-workflows",r="Settings/Review_Workflows/RESET_WORKFLOW",l="Settings/Review_Workflows/SET_CONTENT_TYPES",o="Settings/Review_Workflows/SET_IS_LOADING",f="Settings/Review_Workflows/SET_ROLES",u="Settings/Review_Workflows/SET_WORKFLOW",i="Settings/Review_Workflows/SET_WORKFLOWS",g="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",T="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",E="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",v="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",A="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",a="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",R="Settings/Review_Workflows/WORKFLOW_UPDATE",S={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},D=t.W.colors.primary600,L={STAGE:"stage"},w="numberOfWorkflows",I="stagesPerWorkflow"},68886:function(x,d,e){e.d(d,{k:function(){return r},s:function(){return l}});var t=e(41865),n=e(2121);function r(o){if(!o)return null;const u=Object.entries(t.W.colors).filter(([,i])=>i.toUpperCase()===o.toUpperCase()).reduce((i,[g])=>(n.lv?.[g]&&(i=g),i),null);return u?{themeColorName:u,name:n.lv[u]}:null}function l(){return Object.entries(n.lv).map(([o,f])=>({hex:t.W.colors[o].toUpperCase(),name:f}))}},90431:function(x,d,e){e.d(d,{Q:function(){return T}});var t=e(74512),n=e(32735),r=e(8471),l=e(73290),o=e(65351),f=e(42561),u=e(84642),i=e(8365);const g=(0,r.ZP)(o.G)`
  text-decoration: none;

  &[aria-disabled='true'] {
    ${l.sg}
    &:active {
      ${l.sg}
    }
  }

  &:hover {
    ${l.yP}
  }

  &:active {
    ${l.tB}
  }

  ${l.PD}
`,T=n.forwardRef(({variant:E="default",startIcon:v,endIcon:A,disabled:a=!1,children:R,size:S="S",as:D=f.f,...L},w)=>{const I=S==="S"?2:"10px",F=4;return(0,t.jsxs)(g,{ref:w,"aria-disabled":a,size:S,variant:E,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:I,paddingLeft:F,paddingRight:F,paddingTop:I,pointerEvents:a?"none":void 0,...L,as:D||f.f,children:[v&&(0,t.jsx)(u.k,{"aria-hidden":!0,children:v}),(0,t.jsx)(i.Z,{variant:S==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:R}),A&&(0,t.jsx)(u.k,{"aria-hidden":!0,children:A})]})});T.displayName="LinkButton"}}]);
